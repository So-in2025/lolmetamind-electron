(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[627],{8604:function(e,t,s){Promise.resolve().then(s.bind(s,5627))},5627:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var o=s(7437),l=s(2265),n=s(1942);let r=(0,l.createContext)(),a=()=>(0,l.useContext)(r),i=e=>{let{children:t}=e,[s,n]=(0,l.useState)(1);(0,l.useEffect)(()=>{let e=localStorage.getItem("widgets-scale");e&&n(parseFloat(e))},[]);let a=e=>{let t=Math.max(.4,Math.min(2,e));n(t),localStorage.setItem("widgets-scale",t.toString())};return(0,o.jsx)(r.Provider,{value:{scale:s,increaseScale:()=>{a(s+.1)},decreaseScale:()=>{a(s-.1)}},children:t})},c=(e,t)=>{let[s,o]=(0,l.useState)(t),[n,r]=(0,l.useState)(!1),a=(0,l.useRef)({x:0,y:0}),[i,c]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let t=localStorage.getItem(e);t&&o(JSON.parse(t)),c(!0)},[e]);let d=(0,l.useCallback)(e=>{r(!0),a.current={x:e.clientX-s.x,y:e.clientY-s.y}},[s]),u=(0,l.useCallback)(e=>{n&&o({x:e.clientX-a.current.x,y:e.clientY-a.current.y})},[n]),m=(0,l.useCallback)(()=>{n&&(r(!1),localStorage.setItem(e,JSON.stringify(s)))},[n,s,e]);return(0,l.useEffect)(()=>(window.addEventListener("mousemove",u),window.addEventListener("mouseup",m),()=>{window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",m)}),[u,m]),{position:s,isLoaded:i,handleMouseDown:d}};function d(){let[e,t]=(0,l.useState)(!0),{scale:s}=a(),{position:r,isLoaded:i,handleMouseDown:d}=c("widget-builds",{x:0,y:50}),[u,m]=(0,l.useState)("Inicia una partida para recibir consejos.");return((0,l.useEffect)(()=>(window.electronAPI.onNewBuildAdvice((e,t)=>{t&&t.recommendedItem&&m("Pr\xf3ximo objeto recomendado: ".concat(t.recommendedItem))}),()=>{window.electronAPI.removeAllListeners("new-build-advice")}),[]),i)?(0,o.jsxs)("div",{className:"absolute w-96 origin-top-left bg-lol-blue-dark/10 border-2 border-lol-gold rounded-md text-lol-gold-light shadow-lg backdrop-blur-sm",style:{top:"".concat(r.y,"px"),left:"".concat(r.x,"px"),transform:"scale(".concat(s,")"),cursor:e?"move":"default"},children:[(0,o.jsxs)("div",{className:"bg-lol-blue-dark p-2 flex justify-between items-center",onMouseDown:e?d:void 0,children:[(0,o.jsx)("h3",{className:"font-bold text-shadow-md",children:"Consejos de Build"}),(0,o.jsx)("button",{onClick:()=>t(!e),className:"text-lol-gold hover:text-white cursor-pointer",children:e?(0,o.jsx)(n.D5B,{}):(0,o.jsx)(n.kUi,{})})]}),(0,o.jsx)("div",{className:"p-4",children:(0,o.jsx)("p",{className:"font-semibold",children:u})})]}):null}function u(){let[e,t]=(0,l.useState)(!0),{scale:s}=a(),{position:r,isLoaded:i,handleMouseDown:d}=c("widget-strategy",{x:0,y:250}),[u,m]=(0,l.useState)("Esperando an\xe1lisis estrat\xe9gico...");return((0,l.useEffect)(()=>(window.electronAPI.onNewStrategyAdvice((e,t)=>{t&&t.advice&&m(t.advice)}),()=>{window.electronAPI.removeAllListeners("new-strategy-advice")}),[]),i)?(0,o.jsxs)("div",{className:"absolute w-96 origin-top-left bg-lol-blue-dark/10 border-2 border-lol-gold rounded-md text-lol-gold-light shadow-lg backdrop-blur-sm",style:{top:"".concat(r.y,"px"),left:"".concat(r.x,"px"),transform:"scale(".concat(s,")"),cursor:e?"move":"default"},children:[(0,o.jsxs)("div",{className:"bg-lol-blue-dark p-2 flex justify-between items-center",onMouseDown:e?d:void 0,children:[(0,o.jsx)("h3",{className:"font-bold text-shadow-md",children:"Consejos Estrat\xe9gicos"}),(0,o.jsx)("button",{onClick:()=>t(!e),className:"text-lol-gold hover:text-white cursor-pointer",children:e?(0,o.jsx)(n.D5B,{}):(0,o.jsx)(n.kUi,{})})]}),(0,o.jsx)("div",{className:"p-4",children:(0,o.jsxs)("p",{className:"italic",children:['"',u,'"']})})]}):null}let m=e=>{if("speechSynthesis"in window){window.speechSynthesis.cancel();let t=new SpeechSynthesisUtterance(e),s=()=>{let e=window.speechSynthesis.getVoices();if(0===e.length){window.speechSynthesis.onvoiceschanged=s;return}let o=e.find(e=>e.name.includes("Google")&&e.lang.startsWith("es-"))||e.find(e=>e.name.includes("Helena")&&"es-ES"===e.lang)||e.find(e=>e.name.includes("Microsoft")&&e.lang.startsWith("es-"))||e.find(e=>e.lang.startsWith("es-"));o?(t.voice=o,t.lang=o.lang):t.lang="es-ES",t.rate=1.1,window.speechSynthesis.speak(t)};s()}else console.log("La s\xedntesis de voz no es soportada en este entorno.")};function x(){let[e,t]=(0,l.useState)(!0),{scale:s}=a(),{position:r,isLoaded:i,handleMouseDown:d}=c("widget-coach",{x:0,y:450}),[u,x]=(0,l.useState)("Esperando eventos del juego..."),[g,h]=(0,l.useState)("Conectando...");return((0,l.useEffect)(()=>{let e=setTimeout(()=>{m("Sistema de voz iniciado. Esperando eventos del juego.")},500);return window.electronAPI.onWebsocketStatus((e,t)=>{h(t)}),window.electronAPI.onNewGameEvent((e,t)=>{t&&t.message&&(x(t.message),m(t.message))}),()=>{clearTimeout(e),window.electronAPI.removeAllListeners("websocket-status"),window.electronAPI.removeAllListeners("new-game-event"),window.speechSynthesis.cancel()}},[]),i)?(0,o.jsxs)("div",{className:"absolute w-96 origin-top-left bg-lol-blue-dark/10 border-2 border-lol-gold rounded-md text-lol-gold-light shadow-lg backdrop-blur-sm",style:{top:"".concat(r.y,"px"),left:"".concat(r.x,"px"),transform:"scale(".concat(s,")"),cursor:e?"move":"default"},children:[(0,o.jsxs)("div",{className:"bg-lol-blue-dark p-2 flex justify-between items-center",onMouseDown:e?d:void 0,children:[(0,o.jsx)("h3",{className:"font-bold text-shadow-md",children:"Coach en Tiempo Real"}),(0,o.jsx)("button",{onClick:()=>t(!e),className:"text-lol-gold hover:text-white cursor-pointer",children:e?(0,o.jsx)(n.D5B,{}):(0,o.jsx)(n.kUi,{})})]}),(0,o.jsxs)("div",{className:"p-4 relative min-h-[5rem]",children:[(0,o.jsxs)("p",{className:"font-bold text-lol-blue-accent text-lg",children:["▶️ ",u]}),(0,o.jsx)("p",{className:"absolute bottom-1 right-2 text-xs text-lol-grey",children:g})]})]}):null}var g=s(2890),h=s.n(g);function w(){let{scale:e,increaseScale:t,decreaseScale:s}=a(),[r,i]=(0,l.useState)({x:10,y:10}),[c,d]=(0,l.useState)(!1),u=(0,l.useRef)(null);return((0,l.useEffect)(()=>{let e=localStorage.getItem("widget-controls");e&&i(JSON.parse(e)),d(!0)},[]),c)?(0,o.jsx)(h(),{nodeRef:u,handle:".drag-handle",defaultPosition:r,onStop:(e,t)=>{localStorage.setItem("widget-controls",JSON.stringify({x:t.x,y:t.y}))},children:(0,o.jsx)("div",{ref:u,className:"absolute origin-top-left",style:{transform:"scale(".concat(e,")")},children:(0,o.jsxs)("div",{className:"bg-lol-grey-dark/90 border border-lol-gold-dark rounded-md text-lol-gold-light shadow-lg backdrop-blur-sm flex items-center gap-2 p-1 cursor-move",children:[(0,o.jsx)("div",{className:"drag-handle px-1",children:"::"}),(0,o.jsx)("button",{onClick:s,className:"bg-lol-grey-light hover:bg-lol-gold-dark p-2 rounded cursor-pointer",children:(0,o.jsx)(n.iFH,{})}),(0,o.jsxs)("span",{className:"min-w-[4ch] text-center font-bold",children:[(100*e).toFixed(0),"%"]}),(0,o.jsx)("button",{onClick:t,className:"bg-lol-grey-light hover:bg-lol-gold-dark p-2 rounded cursor-pointer",children:(0,o.jsx)(n.wEH,{})})]})})}):null}function f(){let[e,t]=(0,l.useState)(!0);return(0,l.useEffect)(()=>(window.electronAPI.onSetEditMode((e,s)=>{t(s)}),()=>{window.electronAPI.removeAllListeners("set-edit-mode")}),[]),(0,o.jsxs)(o.Fragment,{children:[e&&(0,o.jsx)(w,{}),(0,o.jsx)(d,{}),(0,o.jsx)(u,{}),(0,o.jsx)(x,{})]})}function b(){return(0,o.jsx)(i,{children:(0,o.jsx)(f,{})})}}},function(e){e.O(0,[699,494,971,23,744],function(){return e(e.s=8604)}),_N_E=e.O()}]);