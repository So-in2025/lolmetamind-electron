(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[627],{8604:function(e,t,r){Promise.resolve().then(r.bind(r,8860))},357:function(e,t,r){"use strict";var n,o;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(o=r.g.process)?void 0:o.env)?r.g.process:r(8081)},8081:function(e){!function(){var t={229:function(e){var t,r,n,o=e.exports={};function l(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function c(e){if(t===setTimeout)return setTimeout(e,0);if((t===l||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:l}catch(e){t=l}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var i=[],a=!1,u=-1;function d(){a&&n&&(a=!1,n.length?i=n.concat(i):u=-1,i.length&&f())}function f(){if(!a){var e=c(d);a=!0;for(var t=i.length;t;){for(n=i,i=[];++u<t;)n&&n[u].run();u=-1,t=i.length}n=null,a=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function p(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];i.push(new m(e,t)),1!==i.length||a||c(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=p,o.addListener=p,o.once=p,o.off=p,o.removeListener=p,o.removeAllListeners=p,o.emit=p,o.prependListener=p,o.prependOnceListener=p,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var l=r[e]={exports:{}},s=!0;try{t[e](l,l.exports,n),s=!1}finally{s&&delete r[e]}return l.exports}n.ab="//";var o=n(229);e.exports=o}()},8860:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var n=r(7437),o=r(2265),l=r(1942);let s=(0,o.createContext)(),c=()=>(0,o.useContext)(s),i=e=>{let{children:t}=e,[r,l]=(0,o.useState)(1);(0,o.useEffect)(()=>{let e=localStorage.getItem("widgets-scale");e&&l(parseFloat(e))},[]);let c=e=>{let t=Math.max(.4,Math.min(2,e));l(t),localStorage.setItem("widgets-scale",t.toString())};return(0,n.jsx)(s.Provider,{value:{scale:r,increaseScale:()=>{c(r+.1)},decreaseScale:()=>{c(r-.1)}},children:t})},a=(e,t)=>{let[r,n]=(0,o.useState)(t),[l,s]=(0,o.useState)(!1),c=(0,o.useRef)({x:0,y:0}),[i,a]=(0,o.useState)(!1);(0,o.useEffect)(()=>{let t=localStorage.getItem(e);t&&n(JSON.parse(t)),a(!0)},[e]);let u=(0,o.useCallback)(e=>{s(!0),c.current={x:e.clientX-r.x,y:e.clientY-r.y}},[r]),d=(0,o.useCallback)(e=>{l&&n({x:e.clientX-c.current.x,y:e.clientY-c.current.y})},[l]),f=(0,o.useCallback)(()=>{l&&(s(!1),localStorage.setItem(e,JSON.stringify(r)))},[l,r,e]);return(0,o.useEffect)(()=>(window.addEventListener("mousemove",d),window.addEventListener("mouseup",f),()=>{window.removeEventListener("mousemove",d),window.removeEventListener("mouseup",f)}),[d,f]),{position:r,isLoaded:i,handleMouseDown:u}};function u(){let[e,t]=(0,o.useState)(!0),{scale:r}=c(),{position:s,isLoaded:i,handleMouseDown:u}=a("widget-builds",{x:0,y:50}),[d,f]=(0,o.useState)("Inicia una partida para recibir consejos.");return((0,o.useEffect)(()=>(window.electronAPI&&window.electronAPI.on("new-build-advice",e=>{e&&e.recommendedItem&&f("Pr\xf3ximo objeto recomendado: ".concat(e.recommendedItem))}),()=>{window.electronAPI&&"function"==typeof window.electronAPI.removeAllListeners&&window.electronAPI.removeAllListeners("new-build-advice")}),[]),i)?(0,n.jsxs)("div",{className:"absolute w-96 origin-top-left bg-lol-blue-dark/10 border-2 border-lol-gold rounded-md text-lol-gold-light shadow-lg backdrop-blur-sm",style:{top:"".concat(s.y,"px"),left:"".concat(s.x,"px"),transform:"scale(".concat(r,")"),cursor:e?"move":"default"},children:[(0,n.jsxs)("div",{className:"bg-lol-blue-dark p-2 flex justify-between items-center",onMouseDown:e?u:void 0,children:[(0,n.jsx)("h3",{className:"font-bold text-shadow-md",children:"Consejos de Build"}),(0,n.jsx)("button",{onClick:()=>t(!e),className:"text-lol-gold hover:text-white cursor-pointer",children:e?(0,n.jsx)(l.D5B,{}):(0,n.jsx)(l.kUi,{})})]}),(0,n.jsx)("div",{className:"p-4",children:(0,n.jsx)("p",{children:d})})]}):null}function d(){let[e,t]=(0,o.useState)(!0),{scale:r}=c(),{position:s,isLoaded:i,handleMouseDown:u}=a("widget-coach",{x:0,y:500}),[d,f]=(0,o.useState)("Iniciando MetaMind...");return((0,o.useEffect)(()=>(window.electronAPI&&(window.electronAPI.on("new-game-event",e=>{e&&e.message&&(console.log("Nuevo evento de coach:",e.message),f(e.message))}),window.electronAPI.on("new-coach-message",e=>{console.log("Nuevo mensaje de estado/coach:",e),f(e)})),()=>{window.electronAPI&&"function"==typeof window.electronAPI.removeAllListeners&&(window.electronAPI.removeAllListeners("new-game-event"),window.electronAPI.removeAllListeners("new-coach-message")),window.speechSynthesis.cancel()}),[]),i)?(0,n.jsxs)("div",{className:"absolute w-96 origin-top-left bg-lol-blue-dark/10 border-2 border-lol-gold rounded-md text-lol-gold-light shadow-lg backdrop-blur-sm",style:{top:"".concat(s.y,"px"),left:"".concat(s.x,"px"),transform:"scale(".concat(r,")"),cursor:e?"move":"default"},children:[(0,n.jsxs)("div",{className:"bg-lol-blue-dark p-2 flex justify-between items-center",onMouseDown:e?u:void 0,children:[(0,n.jsx)("h3",{className:"font-bold text-shadow-md",children:"Coach en Tiempo Real"}),(0,n.jsx)("button",{onClick:()=>t(!e),className:"text-lol-gold hover:text-white cursor-pointer",children:e?(0,n.jsx)(l.D5B,{}):(0,n.jsx)(l.kUi,{})})]}),(0,n.jsx)("div",{className:"p-4 relative min-h-[5rem]",children:(0,n.jsxs)("p",{className:"font-bold text-lol-blue-accent text-lg",children:["▶ ",d]})})]}):null}function f(){let[e,t]=(0,o.useState)(!0),{scale:r}=c(),{position:s,isLoaded:i,handleMouseDown:u}=a("widget-strategy",{x:0,y:250}),[d,f]=(0,o.useState)("Esperando an\xe1lisis estrat\xe9gico...");return((0,o.useEffect)(()=>(window.electronAPI&&window.electronAPI.on("new-strategy-advice",e=>{e&&e.advice&&f(e.advice)}),()=>{window.electronAPI&&"function"==typeof window.electronAPI.removeAllListeners&&window.electronAPI.removeAllListeners("new-strategy-advice")}),[]),i)?(0,n.jsxs)("div",{className:"absolute w-96 origin-top-left bg-lol-blue-dark/10 border-2 border-lol-gold rounded-md text-lol-gold-light shadow-lg backdrop-blur-sm",style:{top:"".concat(s.y,"px"),left:"".concat(s.x,"px"),transform:"scale(".concat(r,")"),cursor:e?"move":"default"},children:[(0,n.jsxs)("div",{className:"bg-lol-blue-dark p-2 flex justify-between items-center",onMouseDown:e?u:void 0,children:[(0,n.jsx)("h3",{className:"font-bold text-shadow-md",children:"Consejos Estrat\xe9gicos"}),(0,n.jsx)("button",{onClick:()=>t(!e),className:"text-lol-gold hover:text-white cursor-pointer",children:e?(0,n.jsx)(l.D5B,{}):(0,n.jsx)(l.kUi,{})})]}),(0,n.jsx)("div",{className:"p-4",children:(0,n.jsx)("p",{children:d})})]}):null}var m=r(357),p=()=>{let[e,t]=(0,o.useState)({realtimeAdvice:"Esperando consejos del coach...",buildRecommendation:{items:[],runes:[]},strategicAdvice:"Esperando estrategia..."}),[r,l]=(0,o.useState)(null),s=(0,o.useRef)(null);return((0,o.useEffect)(()=>{let e=m.env.NEXT_PUBLIC_WEBSOCKET_URL||"wss://lolmetamind-websocket.onrender.com";return function r(){if(s.current&&s.current.readyState===WebSocket.OPEN)return;let n=new WebSocket("".concat(e,"?token=").concat("mock-token-bypass"));n.onopen=()=>{console.log("\uD83D\uDD17 Conectado al servidor WebSocket."),l(null)},n.onmessage=e=>{try{let r=JSON.parse(e.data);t(e=>({...e,...r}))}catch(e){console.error("Error al parsear el mensaje JSON:",e),l("Error en el formato de datos del servidor.")}},n.onclose=()=>{console.log("\uD83D\uDC94 Desconectado. Reintentando en 5 segundos..."),setTimeout(r,5e3)},n.onerror=e=>{console.error("❌ Error en WebSocket:",e),l("Error en la conexi\xf3n con el servidor."),n.close()},s.current=n}(),()=>{s.current&&s.current.close()}},[]),r)?(0,n.jsx)("div",{className:"p-4 rounded-lg bg-red-900/50 text-red-300 text-center",children:r}):(0,n.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,n.jsx)(d,{message:e.realtimeAdvice}),(0,n.jsx)(u,{build:e.buildRecommendation}),(0,n.jsx)(f,{message:e.strategicAdvice})]})};function v(){return(0,n.jsx)(i,{children:(0,n.jsx)(p,{})})}},1810:function(e,t,r){"use strict";r.d(t,{w_:function(){return u}});var n=r(2265),o={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=n.createContext&&n.createContext(o),s=["attr","size","title"];function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e){return t=>n.createElement(d,c({attr:a({},e.attr)},t),function e(t){return t&&t.map((t,r)=>n.createElement(t.tag,a({key:r},t.attr),e(t.child)))}(e.child))}function d(e){var t=t=>{var r,{attr:o,size:l,title:i}=e,u=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,s),d=l||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",c({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,u,{className:r,style:a(a({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),i&&n.createElement("title",null,i),e.children)};return void 0!==l?n.createElement(l.Consumer,null,e=>t(e)):t(o)}}},function(e){e.O(0,[699,971,23,744],function(){return e(e.s=8604)}),_N_E=e.O()}]);